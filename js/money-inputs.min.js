document.addEventListener("DOMContentLoaded",e=>{let t=document.querySelectorAll("#preco, #desconto"),a=document.querySelectorAll(".currencyInput"),r=document.querySelectorAll(".prefixCurrency"),u="BRL",l={BRL:"R$",USD:"$",EUR:"â‚¬"};function o(e){let t;switch(u.toUpperCase()){case"BRL":t=new Intl.NumberFormat("pt-BR").format(e);break;case"USD":t=new Intl.NumberFormat("en-US").format(e);break;case"EUR":t=new Intl.NumberFormat("de-DE").format(e);break;default:t="Moeda n\xe3o suportada"}return t}a[0].addEventListener("input",e=>{u=e.target.value,a.forEach(t=>{t.value=e.target.value}),r.forEach(t=>{t.textContent=l[e.target.value]}),t.forEach(e=>{if(e.value){let t=e.getAttribute("data-value");e.value=o(parseFloat(t))}})}),t.forEach((e,t)=>{e.addEventListener("input",t=>{let a=t.target.value.replace(/[^\d]/g,""),r=parseInt(a);if(isNaN(r))e.value="",e.setAttribute("data-value","");else{e.value=o(r),e.setAttribute("data-value",r);let u=document.querySelector("#preco-total"),l=document.querySelector("#preco").getAttribute("data-value"),n=document.querySelector("#desconto").getAttribute("data-value");if(l&&n){let c=parseInt(l)-parseInt(n);u.setAttribute("value",o(c)),u.setAttribute("data-value",c);let d=new Event("input",{bubbles:!0});u.dispatchEvent(d)}else u.setAttribute("value",""),u.setAttribute("data-value","")}})})});